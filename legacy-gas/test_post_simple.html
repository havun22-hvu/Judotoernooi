<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Test POST</title>
</head>
<body>
  <h1>Test POST Request</h1>
  <button onclick="testPost()">Test POST</button>
  <pre id="result"></pre>

  <script>
    async function testPost() {
      const resultDiv = document.getElementById('result');
      resultDiv.textContent = 'Testing...';

      try {
        const url = window.location.href.split('?')[0];
        const formData = new FormData();
        formData.append('action', 'zoekJudokaViaQR');
        formData.append('qrData', '{"naam":"Test","gewichtsklasse":"-36kg","blok":5}');

        console.log('Sending POST to:', url);

        const response = await fetch(url, {
          method: 'POST',
          body: formData
        });

        console.log('Response status:', response.status);
        console.log('Response headers:', response.headers);

        const contentType = response.headers.get('content-type');
        resultDiv.textContent = 'Content-Type: ' + contentType + '\n\n';

        const text = await response.text();
        resultDiv.textContent += 'Response:\n' + text.substring(0, 500);

      } catch (error) {
        resultDiv.textContent = 'ERROR: ' + error.message + '\n' + error.stack;
      }
    }
  </script>
</body>
</html>
